
MakeConfig() {
FILE=$1
DAT=$2
XFUNC="$3"  # X X1 log(X)
TVAR=$4   # TVar Reader.T
cat <<EOF >$FILE.mat
//Li=7 F=19
LiFRoss MolVeight 26 Zero 0 HiT 0 Exp6Part Exp_6_en 2037.07 Exp_6_alph 9.32095 Exp_6_r 3.13482  Exp_6_r0 1.94008  CutDiameter 0.74  IncludePow6 1
IdealLiF      CvId 1.5 NMol 26 Zero 6.43 HiT 0  Tvib 736 Trot 0

#IdealLiF      CvId 1.5 NMol 26 Zero 0 HiT 0  Tvib 6390 Trot 170.8
#LiFRoss MolVeight 26 Zero 0 HiT 0 Exp6Part Exp_6_en 2018.97 Exp_6_alph 9.40343 Exp_6_r 3.12057  Exp_6_r0 1.89675  CutDiameter 0.74  IncludePow6 1
#IdealLiF      CvId 3 NMol 26 Zero 0 HiT 0  Tvib 0 Trot 0


MatterSumLiF  {
    Coef1   1
    Matter1   FreeEPureRoss  {  Material_File $FILE.mat   Substance LiFRoss  }
    Coef2   1
    Matter2   FreeEIdeal   {  Material_File $FILE.mat Substance IdealLiF  }
}
MatterSumLiFSpl  {
    Coef1   1
    Matter1   MatterFreeSpl  { LiF_ModRos.spl  }
    Coef2   1
    Matter2   FreeEIdeal   {  Material_File $FILE.mat Substance IdealLiF  }
}

EOF

NUM=$(cat $DAT | gawk 'NR>1' | wc -l)
cat <<EOF >$FILE

=====================  Ignore up to GeneralBegim =============
NameFrom   NameTo
GeneralBegin   $DAT     $DAT.out
=====================   Ignore   up   to   SetBegim   ========
Names      FrCol   ToCol   FrVel   ToVel   Col_Pnt_Val_0
SetBegin      2        4   0        100    0
UncMin_appr_clc NumIt 1 NumT 2 FuncError 1.49012e-008 ResError 1.49012e-008 SumFuncMinim 0
minimN_LM {
    ErrorLQ  1e-008  MathEps05  1.49012e-008  ZeroEig  1e-010  BreakIterStp  1.555
    Lambda   { CoefStart 10 DivideCoef 20 DivideVal 0.1 }
    Optimized 2
}
{  Min1D_Coef 1.2 Min1D_MaxLinSrch 5 Min1D_MaxRetry 5 }
FAZerCurveMain
    XVarName  Var.X YVarName Var.Y UrsVarName UrsVar
    Curve
        URS_Curve {
            Variables {
                Var     UrsCurve_VarStorage { Vars { X Y } }
                TVar    UrsCurve_StepClc { MinVal 10 MaxVal 10 NumDivStp 1 LogScale 0 NumSame 1 Centered 0  }
                Reader      UrsCurve_FileReader { FileName $DAT DataNames {   R P W T  }   DefaultValue  0 }
                EOS     UrsCurve_FreeE { NameDenc Var.X NameTemp $TVAR   NameMatter UrsVar }

                Clc     UrsCurve_Calculator {
                    Input_CurveName_ClcName  {  EOS.Pressure   X  ;  Reader.T X1 ; }
                    Output_CurveName_ClcName {  Y   Y  ;   } DefaultValue  0
                    Program {   Y=$XFUNC;   }
                    }
            }
            Output    UrsCurve_Output2Store {
                ClcName_StoreName { Clc.Y Var.Y  }
            }

            NumIter  $NUM
        }
    InternalClassName  FAZerCurveMatterSum_FreeERoss  MatterFreeE { FreeESumMatter {  FileName  $FILE.mat Substance MatterSumLiF   }  }
Ground              F      F      F      F   0
Intencity           F      F      F      F   -1
  Alpha             F      F      V      F   9.32095
 Epsilon            F      F      V      F   2037.07
 Radius0            F      F      V      F   3.13482
 CutNiuDiam         F      F      F      F   0.74
 RadiusExp          F      F      F      F   0
 MulExp             F      F      F      F   0
 ArgExp             F      F      F      F   0

EOF
}



TestUrs() {
FILE=$1
DAT=$2
MATFILE=$3
NUM=$(gawk 'NR>1' $DAT | wc -l)
cat <<EOF >$FILE.cfg
    URS_Curve {
        Variables {
            Reader  UrsCurve_FileReader { FileName $DAT DataNames {   Dens Pres   }   DefaultValue  0 }
            TVar    UrsCurve_StepClc { MinVal 298 MaxVal 298 NumDivStp 1 LogScale 0 NumSame 1 Centered 0  }
            UrsVar  EOS_Savable { MatterFreeE { FreeESumMatter {  FileName  $MATFILE Substance MatterSumLiF   }  }  }
            EOS     UrsCurve_FreeE { NameDenc Reader.Dens NameTemp TVar   NameMatter UrsVar }

        }
        Output    URS_Curve::Output {
            FileToStore $FILE.out   VectorOfNames {
                Reader.Dens Reader.Pres  EOS.Pressure
            }
        }
        NumIter  $NUM
    }
EOF
}
                #UrsVar  EOS_Savable { FreeEPureRoss  {  Material_File $FILE.mat   Substance LiFRoss  }  }
#exp6cold
#MatterFreeE {
#    FreeESumMatter {
#        FileName  $FILE.mat Substance MatterSumLiF
#    }
# }
#Ground              F      F      F      F   0
#Intencity           F      F      F      F   10
#  Temp              F      F      F      F   0
#  Alpha             F      F      F      F   0
# Epsilon            F      F      F      F   1
# Radius0            F      F      F      F   1
# RadiusExp          F      F      F      F   1
# MulExp             F      F      F      F   1
# ArgExp             F      F      F      F   1
# CutNiuDiam         F      F      F      F   1
# EOS_TYPE           F      F      F      F   0
# GetPres            F      F      F      F   1
  # Ground    : Added Ground int
  # Intencity : Spectr multiplied by
  # Temp      :
  # Alpha     :
  #Epsilon    :
  #Radius0    :
  #RadiusExp  : auto generated
  #MulExp     : auto generated
  #ArgExp     : auto generated
  #CutNiuDiam :
  #EOS_TYPE   : EOS types: MET=0,ROS1=1,ROS2=2,ROSI
  #             D1=3,ROSID2=4,METID2=5,LIQWEAK=6
  #GetPres    : Get pressure (1) or free energy (F) (2) or F+PV
  #             (3) or Pow6 poten (0)
















ColdFull() {
FILE=$1
cat <<EOF > $FILE.1
  1.0507	  3.1915
  1.0579	  4.7872
  1.0679	  4.7872
  1.0787	  5.3191
  1.0851	  6.3830
  1.0923	  7.9787
  1.1023	  8.5106
  1.1149	  9.0426
  1.1367	 12.2340
  1.1448	 12.2340
  1.1529	 13.2979
  1.1629	 15.4255
  1.1710	 16.4894
  1.1801	 17.0213
  1.1864	 18.0851
  1.1973	 19.1489
  1.2045	 19.6809
  1.2226	 21.8085
  1.2398	 25.0000
  1.2480	 25.0000
  1.2570	 26.0638
  1.2643	 28.1915
  1.2905	 31.9149
  1.2995	 32.4468
  1.3059	 34.0426
  1.3131	 35.6383
  1.3240	 36.7021
  1.3312	 37.7660
  1.3367	 38.8298
  1.3475	 40.4255
  1.3557	 42.0213
  1.3602	 42.5532
  1.3719	 44.6809
  1.3783	 45.7447
  1.3946	 48.4043
  1.4027	 49.4681
  1.4172	 52.6596
  1.4244	 54.2553
  1.4326	 56.9149
  1.4398	 56.9149
  1.4462	 58.5106
  1.4570	 60.1064
  1.4633	 61.7021
  1.4778	 64.3617
  1.4787	 64.8936
  1.4860	 66.4894
  1.4923	 69.1489
  1.5014	 69.6809
  1.5104	 71.2766
  1.5267	 75.0000
  1.5321	 76.0638
  1.5421	 78.1915
  1.5502	 79.7872
  1.5557	 81.3830
  1.5638	 83.5106
  1.5729	 85.1064
  1.5765	 86.1702
  1.5882	 88.8298
  1.5919	 90.4255
  1.6090	 94.1489
  1.6154	 96.2766
  1.6317	 99.4681
  1.6362	101.0638
  1.6407	102.6596
  1.6525	104.7872
  1.6588	106.9149
  1.6643	108.5106
  1.6733	110.6383
  1.6796	112.2340
  1.6887	114.3617
  1.6959	117.0213
  1.7014	118.0851
  1.7059	119.6809
  1.7167	122.3404
  1.7222	123.9362
  1.7267	125.5319
  1.7367	128.1915
  1.7421	129.7872
  1.7457	131.3830
  1.7548	133.5106
  1.7620	135.1064
  1.7810	141.4894
  1.7882	143.6170
  1.7919	144.6809
  1.8018	147.8723
  1.8072	149.4681
  1.8136	151.5957
  1.8226	154.2553
  1.8299	156.3830
  1.8353	157.9787
  1.8489	162.7660
  1.8489	162.2340
  1.8552	164.8936
  1.8688	169.1489
  1.8760	171.8085
  1.8796	173.4043
  1.8905	176.5957
  1.8950	178.1915
  1.9005	180.3191
  1.9086	183.5106
  1.9167	186.1702
  1.9213	187.7660
  1.9357	192.5532
  1.9403	194.6809
  1.9448	195.7447
  1.9557	200.0000
  1.9620	202.1277
  1.9656	203.7234
  1.9756	206.9149
  1.9810	209.0426
  1.9855	211.1702
  1.9964	213.2979
EOF
cat <<EOF > $FILE.pnt.1
2.77385 1.16049 100
2.81926 1.56595 1
2.91007 2.14131 50
3.00089 2.50422 1
3.07006 2.73602 1
3.17988 2.97965 1
3.27307 3.21888 1
3.33775 3.33902 1
3.40692 3.46307 1
3.49536 3.60283 1
3.57905 3.73818 1
3.68174 3.87959 1
3.78206 4.04156 1
3.86311 4.12232 1
3.93967 4.23626 1
4.03049 4.31749 20
4.10705 4.39917 1
4.19285 4.48672 1
4.30769 4.59984 1
4.37923 4.67203 1
4.45817 4.73937 1
4.53209 4.80681 1
4.59914 4.8659 1
4.70184 4.95222 1
4.77101 5.00708 1
4.84519 5.06246 1
4.93363 5.13078 1
5.0028 5.18286 1
5.07223 5.2352 1
5.16305 5.29832 50
5.22984 5.34254 1
5.2705 5.36269 100
EOF
cat <<EOF >$FILE.985.1
  1.0217	  6.5041 10
  1.0525	  9.2141 10
  1.0805	 11.3821 10
  1.0941	 13.5501 10
  1.1005	 14.6341 10
  1.1186	 15.1762 10
  1.1348	 16.8022 10
  1.1520	 18.9702 10
  1.1656	 20.0542 10
  1.1837	 22.2222 10
  1.2027	 23.8482 10
EOF
cat <<EOF > $FILE.300.1
  1.0181	  3.7234
  1.0380	  5.3191
  1.0543	  6.9149
  1.0842	  9.5745
  1.1060	 11.7021
  1.1332	 14.3617
  1.1603	 17.5532
  1.1821	 20.2128
  1.2029	 22.3404
  1.2210	 25.0000
  1.2391	 27.6596
  1.2591	 30.3191
  1.2817	 33.5106
  1.3043	 36.7021
  1.3297	 40.9574
  1.3533	 44.6809
  1.3822	 50.0000
  1.4022	 53.7234
  1.4230	 57.4468
  1.4457	 61.7021
  1.4647	 65.4255
  1.4891	 70.7447
  1.5091	 73.9362
  1.5335	 79.7872
  1.5598	 85.6383
  1.5770	 89.8936
  1.5969	 94.6809
  1.6214	101.0638
  1.6803	116.4894
  1.7011	122.3404
  1.7201	127.6596
  1.7554	137.7660
  1.7944	150.0000
  1.8252	159.5745
  1.8759	176.5957
  1.9158	190.9574
  1.9384	198.9362
  1.9638	208.5106
  1.9891	217.5532
EOF
NUM=10
ALL=$(cat $FILE.1 | wc -l)
    cat $FILE.1 | gawk 'BEGIN{print "Denc_g_cm3  Pres_gpa"}NF>1{$1*=2.64;print $0;}' | RmLF > $FILE
    cat $FILE | gawk -v n=$NUM 'BEGIN{print "Denc_g_cm3  Log_Pres_gpa"}NR>1{print $1,log($2)}' | RmLF > $FILE.log
    cat $FILE | gawk -v n=$NUM '(NR-n/2)%n==0{print $1,log($2)}' | RmLF > $FILE.log.short
    cat $FILE.pnt.1 | gawk 'BEGIN{print "Denc_g_cm3  Pres_gpa"}NF>1{print $1, exp($2);}' | RmLF > $FILE.pnt
    cat $FILE.pnt.1 | gawk 'BEGIN{print "Denc_g_cm3  Log_Pres_gpa"}NF>1{print $0;}' | RmLF > $FILE.pnt.log
    cat $FILE.985.1 |   Rm15 | gawk 'BEGIN{print "Denc_g_cm3  Pres_gpa Temp_985"}NF>1{$1*=2.64;$3=20;$4=985;print $0;}' | RmLF > $FILE.985
    cat $FILE.985.1 |   Rm15 | gawk 'BEGIN{print "Denc_g_cm3  LogPres_gpa Temp_985"}NF>1{$1*=2.64;$2=log($2);$3=20;$4=985;print $0;}' | RmLF > $FILE.985.log
    cat $FILE.300.1 |   Rm15 | gawk 'BEGIN{print "Denc_g_cm3  Pres_gpa Temp_985"}NF>1{$1*=2.64;$3=20;$4=300;print $0;}' | RmLF > $FILE.300
    cat $FILE.300.1 |   Rm15 | gawk 'BEGIN{print "Denc_g_cm3  LogPres_gpa Temp_985"}NF>1{$1*=2.64;$2=log($2);$3=20;$4=300;print $0;}' | RmLF > $FILE.300.log
    cat $FILE.pnt.log | Rm15 | gawk 'NR>1{$4=20;print $0}' > $FILE.pnt.ls
    cat $FILE.300.log | Rm15 | gawk 'NR>1' >> $FILE.pnt.ls
    cat $FILE.985.log | Rm15 | gawk 'NR>1' >> $FILE.pnt.ls
    rm $FILE.1 $FILE.pnt.1 $FILE.985.1
}

RmLF() {
sed 's/\\015\\015/\\015/g'
}
Rm15() {
sed 's/\015//g'
}

MkHugPres() {
FILE=$1
cat <<EOF > $FILE.low.1
  1.0141	  0.7692
  1.0282	  2.3077
  1.0423	  3.8462
  1.0549	  5.3846
  1.0690	  7.6923
  1.0831	  8.4615
  1.0986	 10.0000
  1.1113	 10.0000
  1.1254	 12.3077
  1.1380	 12.3077
  1.1521	 13.8462
  1.1620	 17.6923
  1.1746	 19.2308
  1.1873	 19.2308
  1.2014	 21.5385
  1.2127	 23.0769
  1.2282	 23.8462
  1.2394	 26.1538
  1.2507	 28.4615
  1.2648	 30.0000
  1.2803	 31.5385
  1.2873	 33.0769
  1.3000	 36.9231
  1.3127	 36.9231
  1.3254	 40.7692
  1.3366	 40.7692
  1.3451	 43.8462
  1.3577	 46.1538
  1.3704	 49.2308
  1.3761	 50.7692
  1.3944	 54.6154
  1.4056	 55.3846
  1.4155	 57.6923
  1.4239	 60.0000
  1.4380	 63.0769
  1.4535	 63.8462
  1.4606	 67.6923
  1.4789	 68.4615
  1.4845	 72.3077
  1.4930	 75.3846
  1.5028	 78.4615
  1.5155	 80.7692
  1.5225	 84.6154
  1.5338	 86.9231
  1.5408	 90.7692
  1.5549	 93.0769
  1.5634	 96.1538
  1.5761	 97.6923
  1.5845	102.3077
  1.5944	105.3846
  1.6056	109.2308
  1.6127	112.3077
  1.6225	115.3846
  1.6324	119.2308
  1.6394	121.5385
  1.6507	125.3846
  1.6606	129.2308
  1.6704	133.0769
  1.6789	136.1538
  1.6873	139.2308
  1.6972	143.0769
  1.7042	146.1538
  1.7155	151.5385
  1.7239	154.6154
  1.7324	159.2308
  1.7408	163.0769
  1.7493	166.9231
  1.7577	170.0000
  1.7662	173.8462
  1.7732	176.9231
  1.7831	182.3077
  1.7915	186.1538
  1.8000	190.7692
  1.8085	194.6154
  1.8169	200.0000
  1.8239	203.8462
  1.8324	207.6923
  1.8394	212.3077
  1.8465	216.1538
EOF
cat <<EOF > $FILE.high.1
  1.7254	138.4615
  1.7338	141.5385
  1.7451	143.0769
  1.7535	149.2308
  1.7620	153.0769
  1.7718	156.1538
  1.7803	158.4615
  1.7915	164.6154
  1.7972	167.6923
  1.8056	172.3077
  1.8141	176.1538
  1.8197	179.2308
  1.8324	185.3846
  1.8380	188.4615
  1.8465	192.3077
  1.8535	196.9231
  1.8704	206.9231
  1.8775	209.2308
  1.8845	214.6154
  1.8915	218.4615
  1.9070	229.2308
  1.9085	229.2308
  1.9141	233.0769
  1.9211	237.6923
  1.9296	241.5385
  1.9366	246.9231
  1.9423	251.5385
  1.9479	256.1538
  1.9549	260.0000
  1.9648	266.9231
  1.9690	270.7692
  1.9775	276.1538
  1.9845	281.5385
  1.9930	285.3846
  1.9958	291.5385
  2.0028	296.1538
  2.0113	302.3077
  2.0225	311.5385
  2.0254	313.8462
  2.0338	320.0000
  2.0366	323.8462
  2.0465	332.3077
  2.0521	336.9231
  2.0577	342.3077
  2.0620	345.3846
  2.0718	354.6154
  2.0761	358.4615
  2.0817	363.0769
  2.0845	365.3846
  2.0944	374.6154
  2.1000	379.2308
  2.1056	384.6154
  2.1070	386.9231
  2.1169	396.1538
  2.1211	400.7692
  2.1282	406.9231
  2.1296	409.2308
  2.1394	417.6923
  2.1451	423.0769
  2.1507	429.2308
  2.1592	439.2308
  2.1620	440.7692
  2.1662	445.3846
  2.1718	450.0000
  2.1789	458.4615
  2.1831	462.3077
EOF
cat <<EOF >$FILE.pnt.1
  1.0796	  7.2909
  1.0913	  7.8665
  1.0999	  7.8665
  1.1115	 10.1688
  1.1202	 10.7444
  1.1714	 15.9248
  1.2150	 22.4482
  1.2738	 28.7797
  1.2829	 33.5764
  1.3001	 34.3438
  1.3250	 39.5242
  1.3676	 48.1581
  1.4081	 56.9839
  1.4492	 67.3446
  1.4700	 68.1120
  1.4786	 71.3738
  1.4943	 81.1589
  1.5136	 82.5019
  1.5267	 86.1474
  1.5308	 90.9440
  1.5511	 93.6301
  1.5643	103.4152
  1.5698	 94.7813
  1.5698	104.1827
  1.5987	107.8281
  1.7397	146.2011
  1.7904	161.1665
  1.8700	212.0107
EOF
    cat $FILE.low.1 | gawk 'BEGIN{print "HUGDenc_g_cm3  Pres_gpa"}NF>1{$1*=2.64;print $0;}' | RmLF > $FILE.low
    cat $FILE.high.1 | gawk 'BEGIN{print "HUGDenc_g_cm3  Pres_gpa"}NF>1{$1*=2.64;print $0;}' | RmLF > $FILE.high
    cat $FILE.pnt.1 | gawk 'BEGIN{print "HUGDenc_g_cm3  Pres_gpa"}NF>1{$1*=2.64;print $0;}' | RmLF > $FILE.pnt
    rm $FILE.high.1 $FILE.low.1 $FILE.pnt.1
}
MkHugTemp() {
FILE=$1
cat <<EOF >$FILE.1
  2.5338	295.3846
  5.9122	295.3846
  9.0090	295.3846
 11.8243	304.6154
 14.9212	323.0769
 16.6104	323.0769
 19.9887	350.7692
 22.5225	369.2308
 25.3378	396.9231
 27.3086	415.3846
 29.5608	443.0769
 32.3761	480.0000
 34.9099	489.2308
 36.8806	516.9231
 38.8514	563.0769
 41.1036	590.7692
 43.3559	627.6923
 45.6081	664.6154
 47.8604	701.5385
 49.8311	738.4615
 51.8018	766.1538
 54.0541	812.3077
 56.3063	849.2308
 58.5586	895.3846
 60.5293	932.3077
 62.5000	969.2308
 65.0338	1015.3846
 66.7230	1061.5385
 68.6937	1098.4615
 70.6644	1144.6154
 72.6351	1190.7692
 74.3243	1227.6923
 76.2950	1273.8462
 78.2658	1320.0000
 80.2365	1366.1538
 81.9257	1403.0769
 83.6149	1449.2308
 85.3041	1486.1538
 86.9932	1532.3077
 88.6824	1569.2308
 90.0901	1615.3846
 91.7793	1652.3077
 94.0315	1707.6923
 96.0023	1753.8462
 97.9730	1809.2308
 99.6622	1855.3846
101.6329	1910.7692
103.3221	1956.9231
104.7297	2003.0769
106.4189	2049.2308
108.1081	2086.1538
110.0788	2141.5385
111.7680	2196.9231
113.4572	2243.0769
115.1464	2289.2308
117.1171	2353.8462
118.8063	2400.0000
120.4955	2446.1538
121.9032	2492.3077
123.5923	2547.6923
125.2815	2603.0769
126.9707	2649.2308
128.3784	2704.6154
130.3491	2750.7692
131.7568	2806.1538
133.4459	2861.5385
135.1351	2916.9231
136.5428	2972.3077
138.7950	3018.4615
140.2027	3073.8462
141.6104	3129.2308
143.2995	3184.6154
144.9887	3230.7692
146.3964	3286.1538
148.0856	3332.3077
149.4932	3378.4615
150.9009	3443.0769
152.5901	3489.2308
154.2793	3544.6154
155.6869	3609.2308
157.0946	3636.9231
159.0653	3710.7692
160.4730	3756.9231
162.1622	3812.3077
163.5698	3867.6923
165.2590	3923.0769
167.5113	3969.2308
168.6374	4006.1538
170.0450	4089.2308
171.1712	4144.6154
172.5788	4200.0000
173.9865	4246.1538
175.6757	4301.5385
177.0833	4366.1538
178.7725	4421.5385
180.1802	4476.9231
181.5878	4523.0769
182.9955	4578.4615
184.9662	4643.0769
186.3739	4698.4615
187.7815	4753.8462
189.1892	4818.4615
190.3153	4864.6154
192.0045	4920.0000
193.6937	4984.6154
195.1014	5049.2308
196.5090	5095.3846
198.1982	5150.7692
199.8874	5196.9231
201.2950	5252.3077
202.1396	5307.6923
203.5473	5372.3077
204.9550	5427.6923
206.3626	5483.0769
208.0518	5547.6923
209.4595	5612.3077
211.1486	5667.6923
212.5563	5723.0769
213.9640	5787.6923
215.3716	5843.0769
217.0608	5898.4615
218.7500	5972.3077
EOF
cat <<EOF >$FILE.pnt.1
 0.02    	295.3846
 34.0653	535.3846
 52.3649	987.6923
 64.1892	1089.2308
 77.7027	1412.3077
104.1667	2141.5385
110.0788	2307.6923
170.0450	3923.0769
199.8874	5252.3077
EOF

    cat $FILE.1 | gawk 'BEGIN{print "HUGPres_gpa Temp_K"}NF>1{print $0;}' | RmLF > $FILE
    cat $FILE.pnt.1 | gawk 'BEGIN{print "HUGPres_gpa Temp_K"}NF>1{print $0;}' | RmLF > $FILE.pnt
    rm $FILE.1 $FILE.pnt.1
}
